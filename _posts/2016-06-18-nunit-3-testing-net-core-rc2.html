---
layout: post
status: publish
published: true
title: NUnit 3 Tests for .NET Core RC2 and ASP.NET Core RC2
author: Rob Prouse
author_email: rob@prouse.org
wordpress_id: 556
wordpress_url: /?p=556
date: '2016-06-18 11:15:43 +0000'
date_gmt: '2016-06-18 16:15:43 +0000'
categories:
- ".NET"
- Testing
- NUnit
- ".NET Core"
tags:
- NUnit
- TDD
- Testing
- DNX
- ".NET Core"
comments:
- id: 85766
  author: Testing .NET Core RC2 Using NUnit 3 - Rob Prouse
  author_email: ''
  author_url: http://www.alteridem.net/2016/05/18/testing-net-core-rc2-using-nunit-3/
  date: '2016-06-18 11:19:35 +0000'
  date_gmt: '2016-06-18 16:19:35 +0000'
  content: "[&#8230;] Update: full NUnit 3 support for .NET Core and ASP.NET Core
    has been released. [&#8230;]"
- id: 85767
  author: Testing .NET Core using NUnit 3 - Rob Prouse
  author_email: ''
  author_url: http://www.alteridem.net/2015/11/04/testing-net-core-using-nunit-3/
  date: '2016-06-18 11:20:27 +0000'
  date_gmt: '2016-06-18 16:20:27 +0000'
  content: "[&#8230;] Update 3 &#8211; full NUnit 3 support for .NET Core and ASP.NET
    Core has been released. [&#8230;]"
- id: 85768
  author: The week in .NET &acirc;&euro;&ldquo; 6/21/2016 | &ccedil;&yen;Å¾&aring;&circ;&euro;&aring;&reg;&permil;&aring;&hellip;&uml;&ccedil;&frac12;&lsquo;
  author_email: ''
  author_url: http://www.shellsec.com/news/30212.html
  date: '2016-06-21 21:08:46 +0000'
  date_gmt: '2016-06-22 02:08:46 +0000'
  content: "[&#8230;] NUnit 3 Tests for .NET Core RC2 and ASP.NET Core RC2 by Rob
    Prouse. [&#8230;]"
- id: 85769
  author: The week in .NET &acirc;&euro;&ldquo; 6/21/2016 | Tech News
  author_email: ''
  author_url: http://ksav.com.np/tech/2016/06/22/the-week-in-net-6212016/
  date: '2016-06-22 00:17:16 +0000'
  date_gmt: '2016-06-22 05:17:16 +0000'
  content: "[&#8230;] NUnit 3 Tests for .NET Core RC2 and ASP.NET Core RC2 by Rob
    Prouse. [&#8230;]"
- id: 85770
  author: danielwertheim
  author_email: daniel@wertheim.se
  author_url: http://danielwertheim.se
  date: '2016-07-01 15:42:00 +0000'
  date_gmt: '2016-07-01 20:42:00 +0000'
  content: Lets say I have a project that targets netstandard1.1, is there a way to
    get this setup to work without having to add netcoreapp1.0 to my project under
    test? I've tried to use imports in my test project but that fails hard.
- id: 85771
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2016-07-01 17:18:00 +0000'
  date_gmt: '2016-07-01 22:18:00 +0000'
  content: |-
    Daniel, I would suggest that you watch this issue on GitHub, https://github.com/nunit/dotnet-test-nunit/issues/42

    We're all learning this .NET Core stuff together and that is why this is still in beta. I will be posting to the GitHub issue as we learn more.
- id: 85772
  author: 'Matt Ward: .NET Core Test Runner Support in Xamarin Studio &#8211; XamGeek.com'
  author_email: ''
  author_url: http://xamgeek.wpengine.com/blog/httplastexitcode-comblog20160709netcoretestrunnersupportinxamarinstudio/
  date: '2016-07-09 21:42:18 +0000'
  date_gmt: '2016-07-10 02:42:18 +0000'
  content: "[&#8230;] NUnit 3 Tests for .NET Core RC2 and ASP.NET Core RC2 [&#8230;]"
- id: 85773
  author: "&ETH;&tilde;&ETH;&sup2;&ETH;&deg;&ETH;&frac12; &ETH;\x90&Ntilde;&euro;&Ntilde;&hellip;&ETH;&cedil;&ETH;&iquest;&ETH;&frac34;&ETH;&sup2;"
  author_email: arkhivania@gmail.com
  author_url: ''
  date: '2016-07-14 08:29:00 +0000'
  date_gmt: '2016-07-14 13:29:00 +0000'
  content: |-
    Hello! Is there a way to debug NUnit test with Visual Studio Code? I changed launch.json ".NET Core Launch (console)" section parameters with
    "program": "/usr/bin/dotnet", "args": ["test"] but breakpoints doesn't working. I see that tests running, but i can't debug them. Thanks!
- id: 85774
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2016-07-14 08:35:00 +0000'
  date_gmt: '2016-07-14 13:35:00 +0000'
  content: |-
    I haven't figured out how to do it myself, but I have mainly been using Visual Studio and only have limited experience debugging in Visual Studio Code. If you figure it out, I would appreciate it if you post your solution.

    Good luck...
- id: 85775
  author: andrecarlucci
  author_email: andrecarlucci@gmail.com
  author_url: ''
  date: '2016-07-14 12:40:00 +0000'
  date_gmt: '2016-07-14 17:40:00 +0000'
  content: Any chance of getting them to run using resharper test runner?
- id: 85776
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2016-07-14 12:45:00 +0000'
  date_gmt: '2016-07-14 17:45:00 +0000'
  content: |-
    I believe that the R# team is working on .NET Core support, but I don't think it has been released yet. You can check their EAPs.

    An alternative for running tests in Visual Studio is TestDriven.NET. Jamie has just added .NET Core support. It isn't released yet, but you can get a copy at https://github.com/jcansdale/TestDriven.Net-Issues/issues/6
- id: 85786
  author: Ministryotech
  author_email: keith@ministryotech.co.uk
  author_url: http://www.ministryotech.co.uk
  date: '2016-10-17 11:16:00 +0000'
  date_gmt: '2016-10-17 16:16:00 +0000'
  content: How does this tie in with VSTS / Visual Studio Online? I've got everything
    working locally but I can't seem to get anywhere with the build server.
- id: 85787
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2016-10-17 12:06:00 +0000'
  date_gmt: '2016-10-17 17:06:00 +0000'
  content: "I don't use VSTS very often, but my understanding is that the Unit Test
    task does not work with .NET Core. You need to run dotnet test directly and then
    publish the results. See https://github.com/Microsoft/vsts-tasks/issues/2126\n\nI
    am not sure if VSTS supports the NUnit 3 result format yet though, so you might
    run into problems with that since the NUnit .NET Core runner doesn't support the
    v2 format yet (ever?). I think there is a pull request outstanding to add support
    for the v3 format. \n\nIf you get it working, I would appreciate it if you could
    report back here or on GitHub."
- id: 85788
  author: Ministryotech
  author_email: keith@ministryotech.co.uk
  author_url: http://www.ministryotech.co.uk
  date: '2016-10-17 12:10:00 +0000'
  date_gmt: '2016-10-17 17:10:00 +0000'
  content: I'm playing now with a command line call to dotnet test and a pickup of
    TestResults.xml - We shall see what we shall see....
- id: 85803
  author: Adam Cox
  author_email: adam@adamcox.net
  author_url: http://adamcox.net/
  date: '2017-03-16 10:17:00 +0000'
  date_gmt: '2017-03-16 15:17:00 +0000'
  content: Hi Rob.  Thanks for your work here.  Regarding your statement "The .NET
    Standard (netstandard) version of the NUnit Framework won&acirc;&euro;&trade;t
    likely be ready until the 3.6 release this summer.", would you have any updates
    on how to accomplish this task ?  I am using VS 2015, with NETStandard1.6.1, NUnit3.6.1,
    and my immediate issue is have VS recognize my unit tests.
- id: 85804
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2017-03-17 13:43:00 +0000'
  date_gmt: '2017-03-17 18:43:00 +0000'
  content: Adam, NUnit 3.6 includes a .NET Standard and a PCL, so the instructions
    in this post should work for you. What we (NUnit) still need to do is update our
    adapters to work with Visual Studio 2017 and the new CSPROJ .NET Core projects.
    The adapter API has changed, so moving to VS2017 and CSPROJ cause this adapter
    to stop working.
- id: 85805
  author: Adam Cox
  author_email: adam@adamcox.net
  author_url: http://adamcox.net/
  date: '2017-03-21 09:03:00 +0000'
  date_gmt: '2017-03-21 14:03:00 +0000'
  content: Hi Rob.  Thanks.  I was able to get my unit testing running.  Although,
    I imagine because I am new to working with NET Core, and Standard (I am using
    1.6), that I found myself hacking about to get it going.
- id: 85820
  author: Andrey Bushman
  author_email: bushman.andrey@gmail.com
  author_url: https://github.com/Andrey-Bushman
  date: '2017-04-19 06:36:00 +0000'
  date_gmt: '2017-04-19 11:36:00 +0000'
  content: "Hi Rob,\n\nThank you for your article. \n\nI try to use it in Visual Studio
    2017, but Test Explorer doesn't see my tests (for ASP.NET Core MVC). I described
    my problem here:\nhttp://stackoverflow.com/questions/43494462/why-test-explorer-doesnt-see-my-nunit-tests-for-asp-net-core-mvc\n\nI
    would be very grateful to you for the help in this question.\n\nBest regards,\nAndrey"
- id: 85821
  author: Rob Prouse
  author_email: rob@prouse.org
  author_url: ''
  date: '2017-04-19 10:56:00 +0000'
  date_gmt: '2017-04-19 15:56:00 +0000'
  content: |-
    Andrew, I responded to your question on Stack Overflow so more people could find the answer. In short, when .NET Core switched from the project.json format to the csproj format, it dropped support for the original .NET Core test adapter API, so the dotnet-test-nunit adapter no longer works with Visual Studio 2017 or the new .NET Core command line tools.

    The new csproj format uses the old Visual Studio test adapter API, so the NUnit team (me) needed to update that test adapter to support .NET Core. That work is nearly done.
---
<p><strong>Update 2:</strong> The switch from the <strong>project.json</strong> format to the new <strong>csproj format</strong> and the associated tooling changes made the <em>dotnet-test-nunit</em> adapter obsolete by switching the test adapter API. I have released an <a href="https://www.nuget.org/packages/NUnit3TestAdapter/3.8.0-alpha1">update to the NUnit Visual Studio Adapter</a> that implements the new test API and supports .NET Core. If you are using Visual Studio 2017 and/or the new .NET Core tooling, see <a href="http://www.alteridem.net/2017/05/04/test-net-core-nunit-vs2017/">Testing .NET Core with NUnit in Visual Studio 2017</a>.</p>
<p><strong>Update:</strong> I have released <a href="https://www.nuget.org/packages/dotnet-test-nunit/">beta 1 of dotnet-test-nunit</a> which has been updated to the RTM of .NET Core 1.0. I have updated this post and the code on GitHub to reflect the changes.</p>
<p>The NUnit team has been working hard since .NET Core RC2 and ASP.NET Core RC2 was released last month to add full NUnit testing for .NET Core, and we are happy to announce the second alpha release of <a href="https://www.nuget.org/packages/dotnet-test-nunit/3.4.0-alpha-2">dotnet-test-nunit</a>.</p>
<p>In my previous blog posts, I explained how to use <a href="http://www.alteridem.net/2016/05/18/testing-net-core-rc2-using-nunit-3/">NUnit to test .NET Core using NUnitLite</a>&nbsp;which worked, but was not the ideal solution. The new <a href="https://www.nuget.org/packages/dotnet-test-nunit/3.4.0-alpha-2">dotnet-test-nunit</a> allows you to test from the command line using the <code>dotnet test</code> command and allows you to run your tests within Visual Studio.<!--more--></p>
<p>The <a href="https://github.com/rprouse/NUnitWithDotNetCoreRC2/">code from this post is on GitHub</a> and is based on the code from my previous post.</p>
<h2>Create a .NET Core Project</h2>
<p>In Visual Studio, <strong>File | New | Project...</strong> and select <strong>Class Library (.NET Core)</strong> under the new <strong>C# | .NET Core</strong> node.</p>
<p><img class="aligncenter size-full wp-image-540" src="/images/2016/05/2016-05-18-09_55_55-New-Project.png" alt="New .NET Core Project" width="941" height="653" /></p>
<p>This it the code under test. To this, I have added the simple calculator class <a href="http://www.alteridem.net/2015/11/04/testing-net-core-using-nunit-3/">from the last post</a>.</p>
<pre><code>public static class Calculator
{
    public static int Add(int x, int y) => x + y;
    public static int Subtract(int x, int y) => x - y;
    public static int Multiply(int x, int y) => x * y;
    public static int Divide(int x, int y) => x / y;
}
</code></pre>
<h2>Create an NUnit .NET Core Test Project</h2>
<p>If you look in <code>global.json</code>, the new standard is to put your code in <code>src</code> and tests in <code>test</code> directories. To conform with this, add a <code>New Solution Folder</code> named test.</p>
<pre><code>{
  "projects": [ "src", "test" ],
  "sdk": {
    "version": "1.0.0-preview2-003121"
  }
}
</code></pre>
<p>To this new <code>test</code> folder, add another <strong>Class Library (.NET Core)</strong> as your test project and edit the <code>project.json</code> based on the following;</p>
<pre><code>{
    "version": "1.1.0-*",

    "dependencies": {
        "NUnitWithDotNetCoreRC2": {
            "target": "project"
        },
        "NUnit": "3.4.0",
        "dotnet-test-nunit": "3.4.0-beta-1"
    },
    "testRunner": "nunit",

    "frameworks": {
        "netcoreapp1.0": {
            "imports": [
                "netcoreapp1.0",
                "portable-net45+win8"
            ],
            "dependencies": {
                "Microsoft.NETCore.App": {
                    "version": "1.0.0-*",
                    "type": "platform"
                }
            }
        }
    }
}</code></pre>
<p>Under dependencies, <code>NUnitWithDotNetCoreRC2</code> is the project reference to the project under test. There are also dependencies on <code>NUnit</code> and the new <code>dotnet-test-nunit</code>.</p>
<p>After the dependencies, we specify that we want to use NUnit for testing with the line <code>"testRunner": "nunit"</code>.</p>
<p>Under frameworks, we need to add to the imports because NUnit is still a PCL assembly. The .NET Standard (netstandard) version of the NUnit Framework won't likely be ready until the 3.6 release this summer. We are waiting until after the final .NET Core release to start that work.</p>
<h2>Add Tests</h2>
<p>Next, you can add your tests to the project by adding a new class;</p>
<pre><code>using NUnit.Framework;

namespace NUnitWithDotNetCoreRC2.Test
{
    [TestFixture]
    public class CalculatorTests
    {
        [TestCase(1, 1, 2)]
        [TestCase(-1, -1, -2)]
        [TestCase(100, 5, 105)]
        public void CanAddNumbers(int x, int y, int expected)
        {
            Assert.That(Calculator.Add(x, y), Is.EqualTo(expected));
        }

        [TestCase(1, 1, 0)]
        [TestCase(-1, -1, 0)]
        [TestCase(100, 5, 95)]
        public void CanSubtract(int x, int y, int expected)
        {
            Assert.That(Calculator.Subtract(x, y), Is.EqualTo(expected));
        }

        [TestCase(1, 1, 1)]
        [TestCase(-1, -1, 1)]
        [TestCase(100, 5, 500)]
        public void CanMultiply(int x, int y, int expected)
        {
            Assert.That(Calculator.Multiply(x, y), Is.EqualTo(expected));
        }

        [TestCase(1, 1, 1)]
        [TestCase(-1, -1, 1)]
        [TestCase(100, 5, 20)]
        public void CanDivide(int x, int y, int expected)
        {
            Assert.That(Calculator.Divide(x, y), Is.EqualTo(expected));
        }
    }
}
</code></pre>
<h2>Running Your Tests</h2>
<p>Now you can run your tests in Visual Studio, or from the command line. In Visual Studio, you may need to reload the solution before your changes are picked up, then your tests will appear in <code>Test Explorer</code> after you build the solution.</p>
<p><img class="aligncenter size-full wp-image-558" src="/images/2016/06/2016-06-18-11_58_24-NUnitWithDotNetCoreRC2.png" alt="NUnit testing .NET Core in Visual Studio" width="356" height="590" /></p>
<p>In addition, use the following commands to run your tests from the command line;</p>
<pre><code># Restore the NuGet packages
dotnet restore

# Run the unit tests in the current directory
dotnet test

# Run the unit tests in a different directory
dotnet test .\test\NUnitWithDotNetCoreRC2.Test\
</code></pre>
<h2>Notes</h2>
<p>Since this is an alpha release, so there are still likely bugs, but it is already being used by some large open source projects so is likely stable for production. Please report any bugs or issues to the <a href="https://github.com/nunit/dotnet-test-nunit/issues" target="_blank">dotnet-test-nunit repository on GitHub</a>.</p>
<p>Finally, the <code>dotnet</code> command line swallows blank lines and does not work with color. The NUnit test runner's output is in color, but you won't see it. These are known issues with the <code>dotnet</code> CLI and not an NUnit bug.</p>
