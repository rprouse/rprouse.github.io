---
layout: post
status: publish
published: true
title: C# 6.0 - Declaration Expressions
author:
  display_name: Rob Prouse
  login: admin
  email: rob@prouse.org
  url: http://www.alteridem.net
author_login: admin
author_email: rob@prouse.org
author_url: http://www.alteridem.net
wordpress_id: 285
wordpress_url: http://www.alteridem.net/?p=285
date: '2014-10-09 16:32:53 +0000'
date_gmt: '2014-10-09 20:32:53 +0000'
categories:
- ".NET"
- C#
- C# 6.0
tags: []
comments: []
---
<p><strong>UPDATE</strong> - <a href="https://roslyn.codeplex.com/discussions/568820">It was decided</a> that Declaration Expressions would not make it into the final release of C# 6.0 and they no longer work in Visual Studio 2015 Preview.</p>
<hr>
<p>This is another <a href="http://www.alteridem.net/category/net/csharp/csharp-60/">post in the series</a> on the new features that are coming in C# 6.0.</p>
<p>This is a complex name for a simple concept. Until now, if you ever wanted to use an out parameter in a method, you had to declare it before using it.</p>
<p>We've all written code like this,</p>
<pre><code>int i;
if (Int32.TryParse(value, out i))
{
    // Use i here
}</code></pre>
<p>Now you can write the much simpler,</p>
<pre><code>if (Int32.TryParse(value, out var i))
{
    Assert.That(i, Is.EqualTo(expected));
}</code></pre>
<p>There are a couple of things to note here. First is that i is only in scope within the if statement. You cannot use it outside the if statement. Second, notice that I used var and that the type was correctly infered as int.</p>
<p>It is also useful for casting. You no longer have to cast an object as something, then check if it is null. You can now do it all within the if statement.</p>
<pre><code>if ((string str = obj as string) != null )
{
    Console.WriteLine(str);
}</code></pre>
<p>It can also be useful for quickly supplying default args for a TryParse.</p>
<pre><code>int x = Int32.TryParse(value, out var i) ? i : -1;</code></pre>
<p>Sweet and simple...</p>
<p>If you want to check out the code for this series of posts, it is on GitHub at <a href="https://github.com/rprouse/CSharp60">https://github.com/rprouse/CSharp60</a>.</p>
